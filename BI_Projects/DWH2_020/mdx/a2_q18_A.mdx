-- **Business Question Q18** — MDX for Student A (NEW)
-- For 2024, list Top 5 Countries by total Devices Reporting for Particulate Matter category.
-- Return the 5 countries with the highest values on rows (highest → lowest) and one column with Devices Reporting.

SELECT
  { [Measures].[Devices Reporting] } ON COLUMNS,
  TOPCOUNT(
    NONEMPTY(
      [dim_city].[Geo].[country_name].Members,
      [Measures].[Devices Reporting]
    ),
    5, [Measures].[Devices Reporting]
  ) ON ROWS
FROM (
  SELECT ( [dim_timemonth].[Time].[year_num].&[2024] ) ON 0 FROM (
    SELECT (
      FILTER(
        [dim_param].[Param].[param_name].Members,
        ANCESTOR(
          [dim_param].[Param].CurrentMember,
          [dim_param].[Param].[category]
        ).Name = "Particulate matter"
      )
    ) ON 0 FROM [AirQ Cube]
  )
)
